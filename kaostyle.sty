\ProvidesPackage{kaostyle}

% A set of suggested packages and macros which work well with the kao
% classes, but which are not otherwise required by those classes.

% This package is not imported by any of the styles: instead users are
% encouraged to put a copy in their own document folder and to use it as
% part of their own preamble. This makes it easy to change package options
% or remove them completely if they conflict with another package.

% These imports used to be part of kao.sty, which is imported by all kao clases.
% However doing so prevents authors from using alternatives which may conflict
% (e.g. algorithm instead of algorithm2e) or from loading those packages with
% different options (e.g. using xindy for glossaries).
% Technically there are workarounds, but the simplest (and what the kao
% documentation recommends) is to copy kao.sty into your project folder and
% modify it. While this works, it means that the kao classes cannot really be
% used as "normal" packages, i.e. placed into the globabl texmf hierarchy.
% Having to keep a copy of kao.sty in each project directory is a bit
% inconvenient, but a bigger issue is that kao.sty also contains a lot of
% low-level code a user should not touch unless they really know what they are
% doing. In other words, the old kao.sty was really composed of two things:
% * The core layout macros and options which make the distinctive kao 'look',
%   and which are used by all kao classes.
%   - Most users will never want to modify this. In fact, unless they are
%     advanced users, they probably would not be able to.
% * A set of packages reflecting the authorâ€™s usage and preferences.
%   - A list of packages and options, very similar to what users are used to
%     putting in their preamble.
% The package constitutes that second part.
% The new kao.sty contains only the first part, and since it is unlikely to
% require changes by users, can be put within the globabl texmf hierarchy.

%-----------------------------------------------------------------------------
%   KAO SUGGESTED PACKAGES
%-----------------------------------------------------------------------------

% Productivity
\RequirePackage{pdfpages} % Insert PDF pages
\RequirePackage{subfiles} % Adopt a modular structure
\RequirePackage{todonotes} % Add useful notes in the margins

% Listings code
\RequirePackage{listings} % Code
%\RequirePackage{minted} (must be loaded before scrhack)

% Configure the listings
\definecolor{listingkeywords}{rgb}{0.0, 0.5, 0.0}
\definecolor{listingidentifiers}{rgb}{0, 0, 0}
\definecolor{listingcomments}{rgb}{0.25, 0.5, 0.5}
\definecolor{listingstrings}{rgb}{0.73, 0.13, 0.13}
\definecolor{listingnumbers}{rgb}{0.25, 0.25, 0.25}
% Define a fancy style
\lstdefinestyle{kaolst}{
    aboveskip=0.7\topskip,
    belowskip=0.1\topskip,
    basicstyle=\small\ttfamily,
    commentstyle=\color{listingcomments}\itshape,
    keywordstyle=\color{listingkeywords}\bfseries,
    numberstyle=\scriptsize\color{listingnumbers}\ttfamily,
    stringstyle=\color{listingstrings},
    identifierstyle=\color{listingidentifiers},
    backgroundcolor=\color{White},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=t,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    numbers=left,
    numbersep=1em,
    %frame=lines,
    frame=l,
    framerule=.7pt,
    tabsize=4,
    defaultdialect=[LaTeX]Tex,
}
% Define a plain style as well
\lstdefinestyle{kaolstplain}{
    aboveskip=0.6\topskip,
    belowskip=-0.1\topskip,
    basicstyle=\small\ttfamily,
    commentstyle=\color{listingcomments}\itshape,
    keywordstyle=\color{listingkeywords}\bfseries,
    numberstyle=\scriptsize\color{listingnumbers}\ttfamily,
    stringstyle=\color{listingstrings},
    identifierstyle=\color{listingidentifiers},
    backgroundcolor=\color{White},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    numbers=none,
    frame=none,
    tabsize=4,
    defaultdialect=[LaTeX]Tex,
}
\lstset{style=kaolst}% Use the fancy style

% Verbatim
%\RequirePackage{fancyvrb} % Customization of verbatim environments
%\fvset{fontsize=\normalsize} % Change here the font size of all 
%verbatim \preto{\@verbatim}{\topsep=0pt \partopsep=0pt }

% Algorithms
\RequirePackage[linesnumbered, ruled, vlined]{algorithm2e} % Algorithms

% Special gliphs
\RequirePackage{ccicons} % Creative Commons icons

% Index, glossary and nomenclature
\RequirePackage{imakeidx}
\RequirePackage[xindy,toc,numberedsection=nameref]{glossaries}
\RequirePackage[intoc]{nomencl}

%-----------------------------------------------------------------------------
%   KAO SUGGESTED MACROS
%-----------------------------------------------------------------------------

% Commands to print specific words always in the same way
% TODO: in \Command, automatically escape braces {} and replace backslashes with \textbackslash
\newcommand{\Class}[1]{\texttt{#1}}
\newcommand{\Package}[1]{\texttt{#1}}
\newcommand{\Option}[1]{\texttt{#1}}
\newcommand{\Command}[1]{\texttt{\textbackslash#1}}
\newcommand{\Environment}[1]{\texttt{#1}}
\newcommand{\Path}[1]{\texttt{#1}}

% Print latin words in italics (The xspace package is required but we already loaded it in the class)
\newcommand{\hairsp}{\hspace{1pt}} % Command to print a very short space
\newcommand{\invitro}{\textit{in vitro}\xspace}
\newcommand{\invivo}{\textit{in vivo}\xspace}
\newcommand{\cis}{\textit{cis}\xspace}
\newcommand{\trans}{\textit{trans}\xspace}
\newcommand{\etal}{\textit{et al.}\xspace}
\newcommand{\denovo}{\textit{de novo}\xspace}
\newcommand{\adhoc}{\textit{ad hoc}\xspace}
\newcommand{\etcetera}{\textit{et cetera}\xspace}
\newcommand{\etc}{\textit{etc.}\xspace}
\newcommand{\ie}{\textit{i.\nobreak\hairsp{}e.}\xspace}
\newcommand{\eg}{\textit{e.\nobreak\hairsp{}g.}\xspace}
\newcommand{\vs}{\textit{vs}\xspace}
\newcommand{\cfr}{\textit{cfr.}\xspace}

% Tables
\newcommand{\na}{\quad--} % Used in tables for N/A cells
\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}} % Create parentheses around text in tables which take up no horizontal space - this improves column spacing
\newcommand{\hangstar}{\makebox[0pt][l]{*}} % Create asterisks in tables which take up no horizontal space - this improves column spacing

% A command to print the current month and year (from tufte-latex)
\newcommand{\monthyear}{\ifcase\month\or January\or February\or March\or 
April\or May\or June\or July\or August\or September\or October\or 
November\or December\fi\space\number\year}
